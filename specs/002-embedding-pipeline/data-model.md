# Data Model: Embedding Pipeline

## Document Chunk Entity

**Description**: Represents a segment of extracted text from a Docusaurus page with metadata

**Fields**:
- `id` (string): Unique identifier for the chunk
- `content` (string): The actual text content of the chunk
- `source_url` (string): Original URL where the content was found
- `title` (string): Title of the page where the content was found
- `section` (string): Section or heading under which the content appears
- `created_at` (datetime): Timestamp when the chunk was created
- `metadata` (dict): Additional metadata about the chunk

**Validation Rules**:
- `content` must not be empty
- `source_url` must be a valid URL
- `id` must be unique across all chunks

## Embedding Vector Entity

**Description**: Numerical representation of text content generated by Cohere with associated metadata

**Fields**:
- `vector_id` (string): Unique identifier for the vector
- `embedding` (list[float]): The actual vector values (float array)
- `document_chunk_id` (string): Reference to the source document chunk
- `metadata` (dict): Metadata including source_url, title, section, etc.
- `created_at` (datetime): Timestamp when the embedding was created

**Validation Rules**:
- `embedding` must be a list of floats with consistent dimensions
- `document_chunk_id` must reference an existing document chunk
- `vector_id` must be unique

## Qdrant Collection Structure

**Collection Name**: `rag_embedding`

**Payload Structure**:
- `source_url` (keyword): URL of the source document
- `title` (text): Title of the source page
- `section` (text): Section where content appears
- `content` (text): The actual text content
- `created_at` (integer): Unix timestamp

**Vector Configuration**:
- Size: 1024 (Cohere embedding dimension)
- Distance: Cosine similarity

## State Transitions

1. **Document Extraction** → **Document Chunk**: Raw HTML is parsed and converted to clean text chunks
2. **Document Chunk** → **Embedding Vector**: Text content is converted to vector representation
3. **Embedding Vector** → **Qdrant Storage**: Vector is stored in Qdrant with metadata for retrieval